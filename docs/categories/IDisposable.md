---
layout: default
title: '‚ôªÔ∏è –ß—Ç–æ —Ç–∞–∫–æ–µ `IDisposable` –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?'
description: ''
author: 'Dvurechensky'
date: 2025-08-28
published: true
tags:
  - IDisposable
  - C#
---

<p align="center">
    <a href="https://git.io/typing-svg"><img src="https://readme-typing-svg.demolab.com?font=Fira+Code&pause=1000&center=true&vCenter=true&width=435&lines=%D0%9F%D0%BE%D0%B2%D1%82%D0%BE%D1%80%D0%B5%D0%BD%D0%B8%D0%B5+-+%D0%BC%D0%B0%D1%82%D1%8C+%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D1%8F" alt="Typing SVG" /></a>
</p>
<p align="center">
    <a href="https://sites.google.com/view/dvurechensky" target="_blank"><img alt="Static Badge" src="https://shields.dvurechensky.pro/badge/Dvurechensky-Nikolay-blue"></a>
</p>

## ‚ú® –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [‚ú® –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)
  - [üîπ –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ](#-–∫—Ä–∞—Ç–∫–æ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ)
  - [üîπ –ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç –∏ –ø–æ—á–µ–º—É –Ω—É–∂–µ–Ω](#-—á—Ç–æ-–æ–Ω-–¥–µ–ª–∞–µ—Ç-–∏-–ø–æ—á–µ–º—É-–Ω—É–∂–µ–Ω)
  - [üîπ –î–µ—Ç–∞–ª–∏: —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ vs Dispose (—Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã)](#-–¥–µ—Ç–∞–ª–∏-—Å–±–æ—Ä—â–∏–∫-–º—É—Å–æ—Ä–∞-vs-dispose-—Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã)
  - [üîπ –ö–∞–∫ `using` —Å–≤—è–∑–∞–Ω —Å `IDisposable` –∏ –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç](#-–∫–∞–∫-using-—Å–≤—è–∑–∞–Ω-—Å-idisposable-–∏-–∫–∞–∫-–æ–Ω-—Ä–∞–±–æ—Ç–∞–µ—Ç)
  - [üîπ –ö–æ–≥–¥–∞ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å `IDisposable`](#-–∫–æ–≥–¥–∞-—Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å-idisposable)
  - [üîπ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (pattern) ‚Äî –¥–ª—è –Ω–∞—Å–ª–µ–¥—É–µ–º—ã—Ö –∏ –¥–ª—è –∑–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤](#-–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π-—à–∞–±–ª–æ–Ω-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏-pattern--–¥–ª—è-–Ω–∞—Å–ª–µ–¥—É–µ–º—ã—Ö-–∏-–¥–ª—è-–∑–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã—Ö-–∫–ª–∞—Å—Å–æ–≤)
    - [1) –®–∞–±–ª–æ–Ω –¥–ª—è –ù–ï-–∑–∞–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–≥–æ (unsealed) –∫–ª–∞—Å—Å–∞ ‚Äî —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º:](#1-—à–∞–±–ª–æ–Ω-–¥–ª—è-–Ω–µ-–∑–∞–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–≥–æ-unsealed-–∫–ª–∞—Å—Å–∞--—Å-–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π-–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è-–∏-—Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º)
    - [2) –î–ª—è `sealed` –∫–ª–∞—Å—Å–∞ ‚Äî –ø—Ä–æ—â–µ (–±–µ–∑ –≤–∏—Ä—Ç—É–∞–ª–æ–≤ –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞, –µ—Å–ª–∏ –Ω–µ—Ç unmanaged):](#2-–¥–ª—è-sealed-–∫–ª–∞—Å—Å–∞--–ø—Ä–æ—â–µ-–±–µ–∑-–≤–∏—Ä—Ç—É–∞–ª–æ–≤-–∏-—Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞-–µ—Å–ª–∏-–Ω–µ—Ç-unmanaged)
  - [üîπ SafeHandle vs IntPtr](#-safehandle-vs-intptr)
  - [üîπ `IAsyncDisposable` –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π `Dispose`](#-iasyncdisposable-–∏-–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π-dispose)
  - [üîπ –°—Ç—Ä—É–∫—Ç—É—Ä—ã (`struct`) –∏ `IDisposable`](#-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã-struct-–∏-idisposable)
  - [üîπ –û—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏ –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏](#-–æ—Å–æ–±—ã–µ-—Å–ª—É—á–∞–∏-–∏-–ø–æ–¥–≤–æ–¥–Ω—ã–µ-–∫–∞–º–Ω–∏)
  - [üîπ –ü—Ä–∏–º–µ—Ä—ã (–∫–æ—Ä–æ—Ç–∫–æ)](#-–ø—Ä–∏–º–µ—Ä—ã-–∫–æ—Ä–æ—Ç–∫–æ)
  - [üîπ –ö–æ–≥–¥–∞ –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å `IDisposable`](#-–∫–æ–≥–¥–∞-–Ω–µ-—Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å-idisposable)
  - [üîπ –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç ‚Äî –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `IDisposable` —Å–¥–µ–ª–∞–π—Ç–µ:](#-–±—ã—Å—Ç—Ä—ã–π-—á–µ–∫–ª–∏—Å—Ç--–ø—Ä–∏-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏-idisposable-—Å–¥–µ–ª–∞–π—Ç–µ)
  - [üîπ –ö–æ—Ä–æ—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —á–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#-–∫–æ—Ä–æ—Ç–∫–∏–µ-–æ—Ç–≤–µ—Ç—ã-–Ω–∞-—á–∞—Å—Ç—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)

**[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≥–ª–∞–≤–Ω–æ–π](../index.md)**

### üîπ –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ö–æ—Ä–æ—Ç–∫–æ: `IDisposable` ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –æ–¥–Ω–∏–º –º–µ—Ç–æ–¥–æ–º `Dispose()`. –û–Ω –Ω—É–∂–µ–Ω –¥–ª—è **–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ** –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (–æ–±—ã—á–Ω–æ: unmanaged-—Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –¥–æ—Ä–æ–≥–∏—Ö/–≤–Ω–µ—à–Ω–∏—Ö managed-—Ä–µ—Å—É—Ä—Å–æ–≤) –≤ –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω. –≠—Ç–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –æ–∂–∏–¥–∞–Ω–∏—é, –ø–æ–∫–∞ —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ –æ—Å–≤–æ–±–æ–¥–∏—Ç –æ–±—ä–µ–∫—Ç ‚Äî `Dispose()` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.

–ù–∏–∂–µ ‚Äî —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ, –ø—Ä–∏–º–µ—Ä—ã –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏.

---

### üîπ –ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç –∏ –ø–æ—á–µ–º—É –Ω—É–∂–µ–Ω

- `IDisposable` –∏–º–µ–µ—Ç —Å–∏–≥–Ω–∞—Ç—É—Ä—É: `public interface IDisposable { void Dispose(); }`.
- –ï–≥–æ —Ü–µ–ª—å ‚Äî –¥–∞—Ç—å –∫–ª–∞—Å—Å–∞–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å **–æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã** (—Ñ–∞–π–ª–æ–≤—ã–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã, —Å–æ–∫–µ—Ç—ã, GDI-—Ö—ç–Ω–¥–ª—ã, unmanaged-–ø–∞–º—è—Ç—å, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î, –¥—Ä—É–≥–∏–µ `IDisposable` –ø–æ–ª—è –∏ —Ç.–¥.) **–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ** (—Å—Ä–∞–∑—É, –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è GC).
- –ë–µ–∑ `Dispose()` —Ä–µ—Å—É—Ä—Å—ã, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –û–°/–≤–Ω–µ—à–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞, –º–æ–≥—É—Ç –æ—Å—Ç–∞—Ç—å—Å—è –∑–∞–Ω—è—Ç—ã–º–∏ –¥–æ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (–ø–æ–∫–∞ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è), —á—Ç–æ –≤–µ–¥—ë—Ç –∫ —É—Ç–µ—á–∫–∞–º/–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—é —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.

---

### üîπ –î–µ—Ç–∞–ª–∏: —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ vs Dispose (—Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã)

- GC —É–ø—Ä–∞–≤–ª—è–µ—Ç **—É–ø—Ä–∞–≤–ª—è–µ–º–æ–π** –ø–∞–º—è—Ç—å—é. –û–Ω –ù–ï –∑–Ω–∞–µ—Ç, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –≤–Ω–µ—à–Ω–∏–µ –û–°-—Ä–µ—Å—É—Ä—Å—ã, –ø–æ—ç—Ç–æ–º—É –µ—Å—Ç—å —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä (destructor `~Class()` –≤ C#), –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –º–µ—Ö–∞–Ω–∏–∑–º, –Ω–æ:

  - —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–Ω–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ** (–∫–æ–≥–¥–∞ GC –ø–æ—Å—á–∏—Ç–∞–µ—Ç –Ω—É–∂–Ω—ã–º);
  - —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –º–æ–∂–µ—Ç –∑–∞–¥–µ—Ä–∂–∞—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ;
  - —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–æ–±—ä–µ–∫—Ç –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ñ–∏–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—É—é –æ—á–µ—Ä–µ–¥—å).

- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `Dispose()` –¥–ª—è **–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ** –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è, –∞ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä ‚Äî —Ç–æ–ª—å–∫–æ –∫–∞–∫ ¬´—Å—Ç—Ä–∞—Ö–æ–≤–∫—É¬ª –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –∑–∞–±—ã–ª –≤—ã–∑–≤–∞—Ç—å `Dispose()` (–∏ **—Ç–æ–ª—å–∫–æ** –µ—Å–ª–∏ –∫–ª–∞—Å—Å –Ω–∞–ø—Ä—è–º—É—é –≤–ª–∞–¥–µ–µ—Ç unmanaged-—Ä–µ—Å—É—Ä—Å–∞–º–∏).
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ `Dispose()` –æ–±—ã—á–Ω–æ –≤—ã–∑—ã–≤–∞—é—Ç `GC.SuppressFinalize(this)`, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –∑–∞–ø—É—Å–∫ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ (–µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å) ‚Äî —ç–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ä–∞–±–æ—Ç—ã GC.

---

### üîπ –ö–∞–∫ `using` —Å–≤—è–∑–∞–Ω —Å `IDisposable` –∏ –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç

- `using` ‚Äî —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `Dispose()`:

  ```csharp
  using (var r = new Resource())
  {
      // –∏—Å–ø–æ–ª—å–∑—É–µ–º r
  } // –∑–¥–µ—Å—å r.Dispose() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ finally
  ```

- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç `using` –≤ `try/finally`:

  ```csharp
  var r = new Resource();
  try
  {
      // ...
  }
  finally
  {
      if (r != null) ((IDisposable)r).Dispose();
  }
  ```

  ‚Äî –≤–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç: –µ—Å–ª–∏ `r` –æ–∫–∞–∑–∞–ª—Å—è `null`, `Dispose()` –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è.

- C# 8 –¥–æ–±–∞–≤–∏–ª _using declaration_:

  ```csharp
  using var r = new Resource();
  // r –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ Dispose() –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Ç–µ–∫—É—â–µ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
  ```

- –î–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç `IAsyncDisposable` + `await using`:

  ```csharp
  await using var stream = new AsyncStream();
  // –Ω–∞ –≤—ã—Ö–æ–¥–µ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω await stream.DisposeAsync()
  ```

---

### üîπ –ö–æ–≥–¥–∞ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å `IDisposable`

–†–µ–∞–ª–∏–∑—É–π—Ç–µ `IDisposable`, –µ—Å–ª–∏:

1. –í–∞—à –∫–ª–∞—Å—Å –≤–ª–∞–¥–µ–µ—Ç unmanaged-—Ä–µ—Å—É—Ä—Å–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é (IntPtr, —Ñ–∞–π–ª–æ–≤—ã–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã –∏ —Ç.–ø.).
2. –í–∞—à –∫–ª–∞—Å—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç `IDisposable` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Stream`, `SqlConnection`, `Timer`) ‚Äî –≤—ã –¥–æ–ª–∂–Ω—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –∏—Ö.
3. –ù—É–∂–Ω–æ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–∞—Ç—å/–æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å —á—Ç–æ-—Ç–æ (–æ—Ç–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –æ—Ç —Å–æ–±—ã—Ç–∏–π, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Ç–∞–π–º–µ—Ä—ã, –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å –±—É—Ñ–µ—Ä—ã –∏ —Ç.–¥.).

–ï—Å–ª–∏ –≤–∞—à –∫–ª–∞—Å—Å –Ω–µ –≤–ª–∞–¥–µ–µ—Ç –Ω–∏ unmanaged-—Ä–µ—Å—É—Ä—Å–∞–º–∏, –Ω–∏ `IDisposable` –ø–æ–ª—è–º–∏ ‚Äî –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, `IDisposable` —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å **–Ω–µ –Ω–∞–¥–æ**.

---

### üîπ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (pattern) ‚Äî –¥–ª—è –Ω–∞—Å–ª–µ–¥—É–µ–º—ã—Ö –∏ –¥–ª—è –∑–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤

#### 1) –®–∞–±–ª–æ–Ω –¥–ª—è –ù–ï-–∑–∞–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–≥–æ (unsealed) –∫–ª–∞—Å—Å–∞ ‚Äî —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º:

```csharp
public class BaseResource : IDisposable
{
    private bool _disposed;

    // –ü—Ä–∏–º–µ—Ä managed-–ø–æ–ª—è –∏ unmanaged-–ø–æ–ª—è (SafeHandle –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ IntPtr)
    private IDisposable? _managedResource;
    private SafeHandle? _safeHandle;

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this); // –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—é ‚Äî —Ä–µ—Å—É—Ä—Å —É–∂–µ –æ—Å–≤–æ–±–æ–∂–¥—ë–Ω
    }

    protected virtual void Dispose(bool disposing)
    {
        if (_disposed) return;

        if (disposing)
        {
            // –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã
            _managedResource?.Dispose();
        }

        // –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º –Ω–µ—É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã
        _safeHandle?.Dispose();

        _disposed = true;
    }

    ~BaseResource()
    {
        Dispose(false); // –≤—ã–∑–æ–≤ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –º—É—Å–æ—Ä–∞, –µ—Å–ª–∏ Dispose –Ω–µ –±—ã–ª –≤—ã–∑–≤–∞–Ω
    }
}
```

–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:

- `Dispose(bool disposing)` ‚Äî `true` –ø—Ä–∏ —è–≤–Ω–æ–º `Dispose()`, `false` –≤ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–µ. –í `false` –Ω–µ–ª—å–∑—è –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –¥—Ä—É–≥–∏–º —É–ø—Ä–∞–≤–ª—è–µ–º—ã–º –æ–±—ä–µ–∫—Ç–∞–º (–æ–Ω–∏ –º–æ–≥–ª–∏ —É–∂–µ –±—ã—Ç—å —Ñ–∏–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã).
- `GC.SuppressFinalize(this)` –≤ `Dispose()` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—É—é —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—é.

#### 2) –î–ª—è `sealed` –∫–ª–∞—Å—Å–∞ ‚Äî –ø—Ä–æ—â–µ (–±–µ–∑ –≤–∏—Ä—Ç—É–∞–ª–æ–≤ –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞, –µ—Å–ª–∏ –Ω–µ—Ç unmanaged):

```csharp
public sealed class SealedResource : IDisposable
{
    private bool _disposed;
    private readonly Stream _stream;

    public void Dispose()
    {
        if (_disposed) return;
        _stream?.Dispose();
        _disposed = true;
    }
}
```

–ï—Å–ª–∏ `sealed` –∫–ª–∞—Å—Å –≤–ª–∞–¥–µ–µ—Ç unmanaged-—Ä–µ—Å—É—Ä—Å–∞–º–∏ ‚Äî –º–æ–∂–Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SafeHandle` –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–µ –Ω—É–∂–µ–Ω, –µ—Å–ª–∏ `SafeHandle` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

### üîπ SafeHandle vs IntPtr

- **–ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞–ø—Ä—è–º—É—é IntPtr** –∏ –Ω–µ –ø–∏—à–∏—Ç–µ low-level —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã, –µ—Å–ª–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SafeHandle` (–∏–∑ `System.Runtime.InteropServices`). `SafeHandle` —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ, –∏–∑–±–∞–≤–ª—è—è –≤–∞—Å –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ finalizer-safe –∫–æ–¥–∞.
- Microsoft —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç: –¥–ª—è unmanaged-—Ä–µ—Å—É—Ä—Å–æ–≤ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SafeHandle` –∏ **–Ω–µ** —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä, –µ—Å–ª–∏ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ.

---

### üîπ `IAsyncDisposable` –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π `Dispose`

- –ò–Ω–æ–≥–¥–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ —Ç—Ä–µ–±—É–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä: `FlushAsync`, `DisposeAsync` –ø–æ—Ç–æ–∫–æ–≤, —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π). –î–ª—è —ç—Ç–æ–≥–æ –≤ .NET –µ—Å—Ç—å `IAsyncDisposable`:

  ```csharp
  public interface IAsyncDisposable { ValueTask DisposeAsync(); }
  ```

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

  ```csharp
  await using var a = new AsyncResource();
  // ...
  // –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ await a.DisposeAsync()
  ```

- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–≤–∫–ª—é—á–∞—è `DisposeAsyncCore()` –≤ protected virtual –¥–ª—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è).

---

### üîπ –°—Ç—Ä—É–∫—Ç—É—Ä—ã (`struct`) –∏ `IDisposable`

- `struct` –º–æ–∂–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `IDisposable`. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `using` –Ω–∞–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä **–Ω–µ –≤—Å–µ–≥–¥–∞** –±—É–¥–µ—Ç –±–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É ‚Äî –µ—Å–ª–∏ –æ–Ω –∑–Ω–∞—Ç—å —Ç–∏–ø –Ω–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –æ–Ω –≤—ã–∑–æ–≤–µ—Ç `Dispose()` –Ω–∞–ø—Ä—è–º—É—é (–±–µ–∑ –±–æ–∫—Å–∞). –ù–æ –ø–µ—Ä–µ–¥–∞—á–∞ `struct` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é (`IDisposable d = s;`) –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –±–æ–∫—Å–∏–Ω–≥—É.
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –±–æ–∫c–∏–Ω–≥–æ–º ‚Äî –æ–Ω –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∞–ª–ª–æ–∫–∞—Ü–∏—è–º.

---

### üîπ –û—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏ –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏

- **–î–≤–æ–π–Ω–æ–µ Dispose**: `Dispose()` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã–∑–æ–≤—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã (–Ω–∏—á–µ–≥–æ –ø–ª–æ—Ö–æ–≥–æ –Ω–µ –¥–µ–ª–∞—é—Ç).
- **–ù–µ –≤—ã–∑—ã–≤–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏–∑ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞** (–æ–Ω–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã).
- **Dispose –Ω–µ –¥–æ–ª–∂–µ–Ω –±—Ä–æ—Å–∞—Ç—å –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π** ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ –≤ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–µ. –í –∏–¥–µ–∞–ª–µ ‚Äî –±—ã—Ç—å ¬´–±–µ–∑–æ–ø–∞—Å–Ω—ã–º¬ª.
- **–°–æ–±—ã—Ç–∏—è**: –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –ø–æ–¥–ø–∏—Å–∞–ª—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –∏–∑–¥–∞—Ç–µ–ª—è, —ç—Ç–æ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É ‚Äî –≤ `Dispose()` –Ω—É–∂–Ω–æ –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è, –∏–Ω–∞—á–µ —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏.
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è**: –µ—Å–ª–∏ —É –≤–∞—Å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª–µ —Å IDisposable, –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è).
- **–†–µ—Å—É—Ä—Å—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (DI)**: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã DI (–Ω–∞–ø—Ä–∏–º–µ—Ä ASP.NET Core) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç `Dispose` –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏ lifetime‚Äô–∞–º–∏ (scoped, transient? scoped/hosted) ‚Äî –Ω—É–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —ç—Ç—É —Å–µ–º–∞–Ω—Ç–∏–∫—É.

---

### üîπ –ü—Ä–∏–º–µ—Ä—ã (–∫–æ—Ä–æ—Ç–∫–æ)

**using ‚Üí try/finally:**

```csharp
using (var r = new Resource()) // –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç
{
    // ...
}
// —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç:
var r = new Resource();
try { /* ... */ }
finally { if (r != null) ((IDisposable)r).Dispose(); }
```

**IAsyncDisposable:**

```csharp
public class MyAsyncResource : IAsyncDisposable
{
    public async ValueTask DisposeAsync()
    {
        // –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
        await SomeAsyncCleanup();
        GC.SuppressFinalize(this);
    }
}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π –ø–æ—Å–ª–µ Dispose:**

```csharp
private void ThrowIfDisposed()
{
    if (_disposed) throw new ObjectDisposedException(nameof(MyClass));
}

public void SomeMethod()
{
    ThrowIfDisposed();
    // ...
}
```

**–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ Dispose (Interlocked):**

```csharp
private int _disposed;
public void Dispose()
{
    if (Interlocked.Exchange(ref _disposed, 1) == 1) return;
    // –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ
}
```

---

### üîπ –ö–æ–≥–¥–∞ –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å `IDisposable`

- –ï—Å–ª–∏ –≤–∞—à –∫–ª–∞—Å—Å –Ω–µ –≤–ª–∞–¥–µ–µ—Ç unmanaged-—Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `IDisposable` –ø–æ–ª–µ–π –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è ‚Äî –Ω–µ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `IDisposable` –±–µ–∑ –Ω–∞–¥–æ–±–Ω–æ—Å—Ç–∏ –ª–∏—à—å —É—Å–ª–æ–∂–Ω—è–µ—Ç API –∏ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–∏–ª–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–ª–∞—Å—Å–∞.

---

### üîπ –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç ‚Äî –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `IDisposable` —Å–¥–µ–ª–∞–π—Ç–µ:

1. –û—Å–≤–æ–±–æ–¥–∏—Ç—å –≤—Å–µ `IDisposable` –ø–æ–ª—è –≤ `Dispose()`.
2. –ï—Å–ª–∏ –µ—Å—Ç—å unmanaged-—Ä–µ—Å—É—Ä—Å—ã ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `SafeHandle` –∏–ª–∏ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä + `Dispose(bool)`.
3. –°–¥–µ–ª–∞—Ç—å `Dispose()` –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º (–ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã–∑–æ–≤—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã).
4. –í—ã–∑–≤–∞—Ç—å `GC.SuppressFinalize(this)` –µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä.
5. –ù–µ –≤—ã–∑—ã–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—ã –∏–∑ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞; –Ω–µ –±—Ä–æ—Å–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–µ.
6. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–µ—Ç–æ–¥—ã –ø–æ—Å–ª–µ `Dispose()` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–≥–∏—Ä—É—é—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∏–¥–∞—é—Ç `ObjectDisposedException`).
7. –ü–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥–ø–æ—á–µ—Å—Ç—å `using`/`using var` –¥–ª—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π.

---

### üîπ –ö–æ—Ä–æ—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —á–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

- **–û–±—è–∑–∞–Ω –ª–∏ –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å `IDisposable`, –µ—Å–ª–∏ –æ–Ω –¥–µ—Ä–∂–∏—Ç `Stream`?**
  –î–∞ ‚Äî –µ—Å–ª–∏ –∫–ª–∞—Å—Å –≤–ª–∞–¥–µ–µ—Ç `Stream` (—Ç.–µ. –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –µ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª), –æ–Ω –¥–æ–ª–∂–µ–Ω –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –µ–≥–æ –≤ `Dispose()`.
- **–ù—É–∂–Ω–æ –ª–∏ –≤—Å–µ–≥–¥–∞ –ø–∏—Å–∞—Ç—å —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä `~Class()`?**
  –ù–µ—Ç. –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã –Ω–∞–ø—Ä—è–º—É—é –≤–ª–∞–¥–µ–µ—Ç–µ unmanaged-—Ä–µ—Å—É—Ä—Å–æ–º –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `SafeHandle`. –§–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä ‚Äî –¥–æ—Ä–æ–≥–æ–π.
- **–ú–æ–∂–Ω–æ –ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å `Dispose()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏?**
  –î–∞ ‚Äî –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `using`/`await using` –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä DI –æ–±—ã—á–Ω–æ —Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è.
- **–î–æ–ª–∂–µ–Ω –ª–∏ `Dispose()` –±—ã—Ç—å –±—ã—Å—Ç—Ä—ã–º?**
  –î–∞. –û–Ω –æ–±—ã—á–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–µ–Ω –∏ –¥–æ–ª–∂–µ–Ω –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã –±—ã—Å—Ç—Ä–æ. –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ ‚Äî —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ `IAsyncDisposable`.

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å, —ç—Ç–æ –ø—Ä—è–º–æ **–∫–ª–∞—Å—Å–∏–∫–∞ –¥–ª—è —Å–æ–±–µ—Å–∞ –Ω–∞ .NET** üëç
–î–∞–≤–∞–π –¥–∞–º —Ç–µ–±–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ ‚Äî —Ç–∞–∫, —á—Ç–æ–±—ã —ç—Ç–æ –±—ã–ª–æ –∫–∞–∫ ¬´—à–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–ª—è –¥–∂—É–Ω–∞¬ª.

---

**[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≥–ª–∞–≤–Ω–æ–π](../index.md)**

<p align="center">‚ú®Dvurechensky‚ú®</p>
