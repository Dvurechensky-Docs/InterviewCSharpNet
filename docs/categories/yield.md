---
layout: default
title: 'üì§ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç `yield return` –∏ –¥–ª—è —á–µ–≥–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?'
description: ''
author: 'Dvurechensky'
date: 2025-08-28
published: true
tags:
  - yield
  - return
  - C#
---

<p align="center">
    <a href="https://git.io/typing-svg"><img src="https://readme-typing-svg.demolab.com?font=Fira+Code&pause=1000&center=true&vCenter=true&width=435&lines=%D0%9F%D0%BE%D0%B2%D1%82%D0%BE%D1%80%D0%B5%D0%BD%D0%B8%D0%B5+-+%D0%BC%D0%B0%D1%82%D1%8C+%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D1%8F" alt="Typing SVG" /></a>
</p>
<p align="center">
    <a href="https://sites.google.com/view/dvurechensky" target="_blank"><img alt="Static Badge" src="https://shields.dvurechensky.pro/badge/Dvurechensky-Nikolay-blue"></a>
</p>

# ‚ú® –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [‚ú® –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)
  - [1Ô∏è‚É£ –ß—Ç–æ —Ç–∞–∫–æ–µ `yield return`](#1Ô∏è‚É£-—á—Ç–æ-—Ç–∞–∫–æ–µ-yield-return)
  - [2Ô∏è‚É£ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä](#2Ô∏è‚É£-—á—Ç–æ-–¥–µ–ª–∞–µ—Ç-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä)
  - [3Ô∏è‚É£ –û—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏](#3Ô∏è‚É£-–æ—Ç–ª–∏—á–∏–µ-–æ—Ç-–æ–±—ã—á–Ω–æ–≥–æ-–≤–æ–∑–≤—Ä–∞—Ç–∞-–∫–æ–ª–ª–µ–∫—Ü–∏–∏)
    - [–ë–µ–∑ `yield`](#–±–µ–∑-yield)
    - [–° `yield`](#—Å-yield)
  - [4Ô∏è‚É£ `yield break`](#4Ô∏è‚É£-yield-break)
  - [5Ô∏è‚É£ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ `yield return`](#5Ô∏è‚É£-–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞-yield-return)
  - [6Ô∏è‚É£ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏](#6Ô∏è‚É£-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å-–∏-–ø–æ–¥–≤–æ–¥–Ω—ã–µ-–∫–∞–º–Ω–∏)
  - [7Ô∏è‚É£ –û—Ç–ª–∏—á–∏—è –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ `return`](#7Ô∏è‚É£-–æ—Ç–ª–∏—á–∏—è-–æ—Ç-–æ–±—ã—á–Ω–æ–≥–æ-return)
  - [8Ô∏è‚É£ –ö–∞–≤–µ—Ä–∑–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ](#8Ô∏è‚É£-–∫–∞–≤–µ—Ä–∑–Ω—ã–µ-–º–æ–º–µ–Ω—Ç—ã-–∫–æ—Ç–æ—Ä—ã–µ-–º–æ–≥—É—Ç-—Å–ø—Ä–∞—à–∏–≤–∞—Ç—å-–Ω–∞-—Å–æ–±–µ—Å–µ)
  - [9Ô∏è‚É£ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#9Ô∏è‚É£-–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
    - [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–∏—Å–µ–ª –§–∏–±–æ–Ω–∞—á—á–∏](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-—á–∏—Å–µ–ª-—Ñ–∏–±–æ–Ω–∞—á—á–∏)
    - [–õ–µ–Ω–∏–≤–æ–µ —á—Ç–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –∏–∑ —Ñ–∞–π–ª–∞](#–ª–µ–Ω–∏–≤–æ–µ-—á—Ç–µ–Ω–∏–µ-—Å—Ç—Ä–æ–∫-–∏–∑-—Ñ–∞–π–ª–∞)
    - [–ö–æ–º–±–∏–Ω–∞—Ü–∏—è `yield return` –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏](#–∫–æ–º–±–∏–Ω–∞—Ü–∏—è-yield-return-–∏-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)
  - [üîü –í–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏](#-–≤–æ–ø—Ä–æ—Å—ã-–Ω–∞-—Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏)

**[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≥–ª–∞–≤–Ω–æ–π](../index.md)**

---

## 1Ô∏è‚É£ –ß—Ç–æ —Ç–∞–∫–æ–µ `yield return`

- `yield return` –ø–æ–∑–≤–æ–ª—è–µ—Ç **–ø–æ—ç—Ç–∞–ø–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏**, –Ω–µ —Å–æ–∑–¥–∞–≤–∞—è —Å—Ä–∞–∑—É –≤–µ—Å—å –º–∞—Å—Å–∏–≤/—Å–ø–∏—Å–æ–∫.
- –ú–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç `yield return`, –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **–∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–º**.
- –ü—Ä–∏ –≤—ã–∑–æ–≤–µ —Ç–∞–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞ **–Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–¥ —Å—Ä–∞–∑—É**, –∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `IEnumerable<T>`/`IEnumerator<T>`.

–ü—Ä–∏–º–µ—Ä:

```csharp
IEnumerable<int> GetNumbers()
{
    for (int i = 0; i < 5; i++)
    {
        yield return i;
    }
}
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
foreach (var n in GetNumbers())
{
    Console.WriteLine(n); // —á–∏—Å–ª–∞ –æ—Ç 0 –¥–æ 4
}
```

---

## 2Ô∏è‚É£ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä

- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ç–æ–¥ —Å `yield return` –≤ **—Å–æ—Å—Ç–æ—è–Ω–∏–µ–≤—É—é –º–∞—à–∏–Ω—É** (state machine):

  - –°–æ–∑–¥–∞—ë—Ç—Å—è –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç `IEnumerable<T>` –∏ `IEnumerator<T>`.
  - –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è (`state`) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏ `MoveNext()`.

- –ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É:

  - **–ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è ¬´–ª–µ–Ω–∏–≤–æ¬ª**, —à–∞–≥ –∑–∞ —à–∞–≥–æ–º, –ø–æ –º–µ—Ä–µ –ø–µ—Ä–µ–±–æ—Ä–∞.
  - **–ü–∞–º—è—Ç—å —ç–∫–æ–Ω–æ–º–∏—Ç—Å—è**, —Ç–∞–∫ –∫–∞–∫ –Ω–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–µ—Å—å –º–∞—Å—Å–∏–≤ –∑–∞—Ä–∞–Ω–µ–µ.

---

## 3Ô∏è‚É£ –û—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏

### –ë–µ–∑ `yield`

```csharp
IEnumerable<int> GetNumbers()
{
    var list = new List<int>();
    for (int i = 0; i < 5; i++)
        list.Add(i);
    return list;
}
```

- –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å—Ä–∞–∑—É.
- –ó–∞—Ç—Ä–∞—Ç—ã –ø–∞–º—è—Ç–∏ –Ω–∞ –≤–µ—Å—å —Å–ø–∏—Å–æ–∫.
- –ù–µ—Ç –ª–µ–Ω–∏–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

### –° `yield`

```csharp
IEnumerable<int> GetNumbers()
{
    for (int i = 0; i < 5; i++)
        yield return i;
}
```

- –≠–ª–µ–º–µ–Ω—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏**.
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è **–±–æ–ª—å—à–∏—Ö –∏–ª–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π**.
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ª–µ–Ω–∏–≤—ã–º–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è–º–∏.

---

## 4Ô∏è‚É£ `yield break`

- –ó–∞–≤–µ—Ä—à–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ü–∏—é –¥–æ—Å—Ä–æ—á–Ω–æ.

```csharp
IEnumerable<int> GetNumbers()
{
    for (int i = 0; i < 10; i++)
    {
        if (i == 5) yield break;
        yield return i;
    }
}
```

- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ 0‚Äì4.

---

## 5Ô∏è‚É£ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ `yield return`

1. **–õ–µ–Ω–∏–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**

   - –ù–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫.
   - –≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏.

2. **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∫–æ–¥–∞**

   - –ù–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å `IEnumerator<T>`.

3. **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π**

```csharp
IEnumerable<int> Infinite()
{
    int i = 0;
    while(true)
        yield return i++;
}
```

4. **–ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç—Å—è —Å LINQ**

```csharp
var evens = GetNumbers().Where(n => n % 2 == 0);
```

- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–µ–Ω–∏–≤–æ—Å—Ç—å, –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏.

---

## 6Ô∏è‚É£ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏

1. **–ö–∞–∂–¥—ã–π `yield return` —Å–æ–∑–¥–∞—ë—Ç state machine** ‚Üí –Ω–µ–±–æ–ª—å—à–æ–π –Ω–∞–∫–ª–∞–¥–Ω–æ–π –∫–ª–∞—Å—Å + —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.
2. **–ù–µ—Ç random access** ‚Äî –Ω–µ–ª—å–∑—è —Å–¥–µ–ª–∞—Ç—å `list[i]`.
3. **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å**:

   - `yield return` –Ω–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–µ–Ω.
   - –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤–æ –≤—Ä–µ–º—è –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Ç–∞–∫–æ–µ –∂–µ, –∫–∞–∫ –∏ —É `foreach`.

4. **Dispose**

   - –ò—Ç–µ—Ä–∞—Ç–æ—Ä —Ä–µ–∞–ª–∏–∑—É–µ—Ç `IDisposable`.
   - –ï—Å–ª–∏ –ø—Ä–µ—Ä—ã–≤–∞–µ–º `foreach` –¥–æ—Å—Ä–æ—á–Ω–æ, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `Dispose` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª, –ø–æ—Ç–æ–∫ –∏ —Ç.–ø.).

–ü—Ä–∏–º–µ—Ä —Å `using`:

```csharp
IEnumerable<string> ReadLines(string path)
{
    using var reader = new StreamReader(path);
    string line;
    while ((line = reader.ReadLine()) != null)
        yield return line;
}
```

- `Dispose` –≤—ã–∑–æ–≤–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏ –∏–ª–∏ –ø—Ä–∏ –¥–æ—Å—Ä–æ—á–Ω–æ–º –≤—ã—Ö–æ–¥–µ.

---

## 7Ô∏è‚É£ –û—Ç–ª–∏—á–∏—è –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ `return`

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞                       | `return`                      | `yield return`                   |
| ------------------------------------ | ----------------------------- | -------------------------------- |
| –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç –∏–ª–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—é | –û–¥–∏–Ω —Ä–∞–∑                      | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ—ç—Ç–∞–ø–Ω–æ      |
| –õ–µ–Ω–∏–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è                    | –ù–µ—Ç                           | –î–∞                               |
| –ü–∞–º—è—Ç—å                               | –í—Å—ë —Å—Ä–∞–∑—É                     | –¢–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç + state   |
| –ò—Ç–µ—Ä–∞—Ç–æ—Ä                             | –ù–µ—Ç                           | –î–∞ (`IEnumerable`/`IEnumerator`) |
| –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ                           | `return` –∑–∞–≤–µ—Ä—à–∞–µ—Ç –º–µ—Ç–æ–¥      | `yield break` –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ü–∏—é |
| –°–æ—Å—Ç–æ—è–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö       | –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏ | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ state machine      |

---

## 8Ô∏è‚É£ –ö–∞–≤–µ—Ä–∑–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ

1. **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ `yield return`?**

   - –°–æ–∑–¥–∞—ë—Ç—Å—è –≤–ª–æ–∂–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å-–∏—Ç–µ—Ä–∞—Ç–æ—Ä —Å –ø–æ–ª—è–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (`state`), –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∏ —Ç–µ–∫—É—â–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º (`Current`).

2. **–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `yield return` –≤ async –º–µ—Ç–æ–¥–µ?**

   - –ù–µ—Ç, `async` –º–µ—Ç–æ–¥ –Ω–µ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å `yield return`. –î–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ª–µ–Ω–∏–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `IAsyncEnumerable<T>` –∏ `await foreach`.

3. **–ß—Ç–æ –µ—Å–ª–∏ –º–µ—Ç–æ–¥ —Å `yield return` –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ?**

   - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞, –∞ –ø—Ä–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ (`MoveNext()`).

4. **–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `yield return` —Å `ref` —Ç–∏–ø–∞–º–∏?**

   - –ù–µ–ª—å–∑—è –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `ref` —á–µ—Ä–µ–∑ `yield return` –Ω–∞–ø—Ä—è–º—É—é ‚Äî —Ç–æ–ª—å–∫–æ –∫–æ–ø–∏—é –∑–Ω–∞—á–µ–Ω–∏—è.

5. **–ß—Ç–æ –µ—Å–ª–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ –∏—Ç–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `yield return`?**

   - –ï—Å–ª–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `foreach`, –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π `InvalidOperationException` –±—É–¥–µ—Ç, –∫–∞–∫ –∏ –ø—Ä–∏ –æ–±—ã—á–Ω–æ–º `foreach`.

6. **`yield return` –∏ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è**

   - –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ `GetEnumerator()` —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä state machine ‚Üí –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –∏—Ç–µ—Ä–∞—Ü–∏—é.

7. **–ú–æ–∂–Ω–æ –ª–∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å `yield return` –∏ –æ–±—ã—á–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏?**

```csharp
foreach(var item in list) yield return item; // –¥–∞, —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –ø—Ä–æ–µ–∫—Ü–∏–π
```

---

## 9Ô∏è‚É£ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–∏—Å–µ–ª –§–∏–±–æ–Ω–∞—á—á–∏

```csharp
IEnumerable<int> Fibonacci()
{
    int a = 0, b = 1;
    while(true)
    {
        yield return a;
        int tmp = a;
        a = b;
        b = tmp + b;
    }
}
```

### –õ–µ–Ω–∏–≤–æ–µ —á—Ç–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –∏–∑ —Ñ–∞–π–ª–∞

```csharp
IEnumerable<string> ReadLines(string path)
{
    using var reader = new StreamReader(path);
    string line;
    while ((line = reader.ReadLine()) != null)
        yield return line;
}
```

### –ö–æ–º–±–∏–Ω–∞—Ü–∏—è `yield return` –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

```csharp
IEnumerable<int> EvenNumbers(IEnumerable<int> numbers)
{
    foreach(var n in numbers)
        if(n % 2 == 0) yield return n;
}
```

---

## üîü –í–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏

1. **–ß—Ç–æ —Ç–∞–∫–æ–µ `yield return`?**
   –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ø–æ—ç—Ç–∞–ø–Ω–æ, –ª–µ–Ω–∏–≤–æ.

2. **–ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ `return`?**
   `return` ‚Äî —Ä–∞–∑–æ–≤–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ; `yield return` ‚Äî –ø–æ—ç—Ç–∞–ø–Ω–æ —á–µ—Ä–µ–∑ enumerator.

3. **–ö–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–¥ –º–µ—Ç–æ–¥–∞ —Å `yield return`?**
   –¢–æ–ª—å–∫–æ –ø—Ä–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ (–ø—Ä–∏ `MoveNext()` enumerator‚Äô–∞).

4. **–ß—Ç–æ —Ç–∞–∫–æ–µ state machine –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ `yield return`?**
   –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ—Ç–æ–¥–∞, –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –º–µ–∂–¥—É –∏—Ç–µ—Ä–∞—Ü–∏—è–º–∏.

5. **–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `yield return` –≤ async –º–µ—Ç–æ–¥–µ?**
   –ù–µ—Ç. –î–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `IAsyncEnumerable<T>`.

6. **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç `yield break`?**
   –ü—Ä–µ–∫—Ä–∞—â–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ü–∏—é –¥–æ—Å—Ä–æ—á–Ω–æ.

7. **–ö–∞–∫ `yield return` –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–∞–º—è—Ç—å?**
   –≠–∫–æ–Ω–æ–º–∏—Ç –ø–∞–º—è—Ç—å, —Ç.–∫. –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤—Å—è –∫–æ–ª–ª–µ–∫—Ü–∏—è —Å—Ä–∞–∑—É; —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç + state.

8. **–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è –∏–∑–º–µ–Ω–∏—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Å `yield return`?**
   –ö–∞–∫ –∏ —Å `foreach`, –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–±—Ä–æ—à–µ–Ω–æ `InvalidOperationException`.

---

**[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≥–ª–∞–≤–Ω–æ–π](../index.md)**

<p align="center">‚ú®Dvurechensky‚ú®</p>
