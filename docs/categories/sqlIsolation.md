---
layout: default
title: 'üîí –ö–∞–∫–∏–µ –±—ã–≤–∞—é—Ç —É—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã?'
description: ''
author: 'Dvurechensky'
date: 2025-08-28
published: true
tags:
  - sql
  - isolation
  - C#
---

<h1 align="center">üîí –ö–∞–∫–∏–µ –±—ã–≤–∞—é—Ç —É—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã?</h1>
<p align="center">
    <a href="https://git.io/typing-svg"><img src="https://readme-typing-svg.demolab.com?font=Fira+Code&pause=1000&center=true&vCenter=true&width=435&lines=%D0%9F%D0%BE%D0%B2%D1%82%D0%BE%D1%80%D0%B5%D0%BD%D0%B8%D0%B5+-+%D0%BC%D0%B0%D1%82%D1%8C+%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D1%8F" alt="Typing SVG" /></a>
</p>
<p align="center">
    <a href="https://sites.google.com/view/dvurechensky" target="_blank"><img alt="Static Badge" src="https://shields.dvurechensky.pro/badge/Dvurechensky-Nikolay-blue"></a>
</p>

# ‚ú® –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [‚ú® –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)
  - [1Ô∏è‚É£ **–ü–æ—á–µ–º—É —É—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ –≤–∞–∂–Ω—ã**](#1Ô∏è‚É£-–ø–æ—á–µ–º—É-—É—Ä–æ–≤–Ω–∏-–∏–∑–æ–ª—è—Ü–∏–∏-–≤–∞–∂–Ω—ã)
  - [2Ô∏è‚É£ **–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞–µ—Ç –∏–∑–æ–ª—è—Ü–∏—è**](#2Ô∏è‚É£-–æ—Å–Ω–æ–≤–Ω—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã-–∫–æ—Ç–æ—Ä—ã–µ-—Ä–µ—à–∞–µ—Ç-–∏–∑–æ–ª—è—Ü–∏—è)
  - [3Ô∏è‚É£ **–£—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ (ANSI SQL Standard)**](#3Ô∏è‚É£-—É—Ä–æ–≤–Ω–∏-–∏–∑–æ–ª—è—Ü–∏–∏-ansi-sql-standard)
    - [a) **Read Uncommitted**](#a-read-uncommitted)
    - [b) **Read Committed (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ SQL Server)**](#b-read-committed-–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é-–≤-sql-server)
    - [c) **Repeatable Read**](#c-repeatable-read)
    - [d) **Serializable**](#d-serializable)
    - [e) **Snapshot (SQL Server —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ)**](#e-snapshot-sql-server-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ)
  - [4Ô∏è‚É£ **–í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è –∏–∑–æ–ª—è—Ü–∏–∏**](#4Ô∏è‚É£-–≤—ã–±–æ—Ä-—É—Ä–æ–≤–Ω—è-–∏–∑–æ–ª—è—Ü–∏–∏)
  - [5Ô∏è‚É£ **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã –¥–ª—è .NET**](#5Ô∏è‚É£-–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ-—Å–æ–≤–µ—Ç—ã-–¥–ª—è-net)

**[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≥–ª–∞–≤–Ω–æ–π](../index.md)**

---

## 1Ô∏è‚É£ **–ü–æ—á–µ–º—É —É—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ –≤–∞–∂–Ω—ã**

–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç **ACID**:

- **A** ‚Äî Atomicity (–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å)
- **C** ‚Äî Consistency (—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å)
- **I** ‚Äî Isolation (–∏–∑–æ–ª—è—Ü–∏—è)
- **D** ‚Äî Durability (–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å)

**Isolation** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤–∏–¥–Ω—ã –¥—Ä—É–≥–∏–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º.

–ë–µ–∑ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–∏:

- –í–æ–∑–º–æ–∂–Ω—ã **–≥—Ä—è–∑–Ω—ã–µ —á—Ç–µ–Ω–∏—è** (dirty read).
- –í–æ–∑–º–æ–∂–Ω—ã **–Ω–µ–ø–æ–≤—Ç–æ—Ä—è–µ–º—ã–µ —á—Ç–µ–Ω–∏—è** (non-repeatable read).
- –í–æ–∑–º–æ–∂–Ω—ã **—Ñ–∞–Ω—Ç–æ–º–Ω—ã–µ —á—Ç–µ–Ω–∏—è** (phantom read).

---

## 2Ô∏è‚É£ **–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞–µ—Ç –∏–∑–æ–ª—è—Ü–∏—è**

| –ü—Ä–æ–±–ª–µ–º–∞                | –ü—Ä–∏–º–µ—Ä                                                                                 | –û–ø–∞—Å–Ω–æ—Å—Ç—å                                       |
| ----------------------- | -------------------------------------------------------------------------------------- | ----------------------------------------------- |
| **Dirty read**          | –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è B —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è A –µ—â—ë –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª–∞ –∏ –ø–æ—Ç–æ–º –æ—Ç–∫–∞—Ç–∏–ª–∞ | B –ø–æ–ª—É—á–∞–µ—Ç –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ               |
| **Non-repeatable read** | –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è B –º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –¥–≤—É–º—è —á—Ç–µ–Ω–∏—è–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ A                           | –ß—Ç–µ–Ω–∏—è A —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è ‚Üí –æ—à–∏–±–∫–∏ –ª–æ–≥–∏–∫–∏            |
| **Phantom read**        | –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è B –≤—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –≤—ã–±–æ—Ä–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ A           | A –≤–∏–¥–∏—Ç ¬´—Ñ–∞–Ω—Ç–æ–º–Ω—ã–µ¬ª —Å—Ç—Ä–æ–∫–∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º SELECT |

---

## 3Ô∏è‚É£ **–£—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ (ANSI SQL Standard)**

### a) **Read Uncommitted**

- **–°—É—Ç—å:** —Å–∞–º–∞—è —Å–ª–∞–±–∞—è –∏–∑–æ–ª—è—Ü–∏—è, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤–∏–¥–∏—Ç **–Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** –¥—Ä—É–≥–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
- **–ü—Ä–æ–±–ª–µ–º—ã:** –¥–æ–ø—É—Å–∫–∞–µ—Ç dirty read, non-repeatable read –∏ phantom read.
- **–ü—Ä–∏–º–µ—Ä:**

```csharp
using var transaction = connection.BeginTransaction(IsolationLevel.ReadUncommitted);
```

- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏, –≥–¥–µ –≤–∞–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å, –∞ –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å ¬´–≥—Ä—è–∑–Ω—ã–º–∏¬ª.

- **–ö–∞–≤–µ—Ä–∑–Ω—ã–π –º–æ–º–µ–Ω—Ç:** SQL Server –º–æ–∂–µ—Ç –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã ‚Üí –±—ã—Å—Ç—Ä–æ, –Ω–æ –Ω–µ–Ω–∞–¥—ë–∂–Ω–æ.

---

### b) **Read Committed (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ SQL Server)**

- **–°—É—Ç—å:** —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤–∏–¥–∏—Ç **—Ç–æ–ª—å–∫–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**.
- **–ü—Ä–æ–±–ª–µ–º—ã:** –¥–æ–ø—É—Å–∫–∞–µ—Ç **non-repeatable read** –∏ **phantom read**, –Ω–æ –Ω–µ—Ç dirty read.
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  - SQL Server –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —á—Ç–µ–Ω–∏—è (shared lock).
  - –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å **Read Committed Snapshot Isolation** ‚Üí —É–º–µ–Ω—å—à–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —á–µ—Ä–µ–∑ versioning.

- **–ö–∞–≤–µ—Ä–∑–Ω—ã–π –º–æ–º–µ–Ω—Ç:** –º–Ω–æ–≥–∏–µ –¥—É–º–∞—é—Ç, —á—Ç–æ Read Committed –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ–µ —á—Ç–µ–Ω–∏–µ ‚Äî –Ω–µ—Ç.

---

### c) **Repeatable Read**

- **–°—É—Ç—å:** —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ **–≤—Å–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω—è—Ç—Å—è** –¥—Ä—É–≥–∏–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –¥–æ –∫–æ–Ω—Ü–∞.
- **–ü—Ä–æ–±–ª–µ–º—ã:** –¥–æ–ø—É—Å–∫–∞–µ—Ç —Ñ–∞–Ω—Ç–æ–º–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (–Ω–æ–≤—ã–µ INSERT –º–æ–≥—É—Ç –ø–æ—è–≤–∏—Ç—å—Å—è).
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  - SQL Server —Å—Ç–∞–≤–∏—Ç shared lock –Ω–∞ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –¥–æ –∫–æ–Ω—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

- **–ö–∞–≤–µ—Ä–∑–Ω—ã–π –º–æ–º–µ–Ω—Ç:** –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –º–æ–≥—É—Ç —É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—é, —Ä–∏—Å–∫ deadlock.

---

### d) **Serializable**

- **–°—É—Ç—å:** —Å–∞–º–∞—è —Å—Ç—Ä–æ–≥–∞—è –∏–∑–æ–ª—è—Ü–∏—è, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–∞–∫, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –æ–Ω–∏ –±—ã–ª–∏ **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏**.
- **–ü—Ä–æ–±–ª–µ–º—ã:** –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –∞–Ω–æ–º–∞–ª–∏–∏: –Ω–µ—Ç dirty read, non-repeatable read, phantom read.
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è range-lock –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Ñ–∞–Ω—Ç–æ–º–Ω—ã—Ö —Å—Ç—Ä–æ–∫.

- **–ö–∞–≤–µ—Ä–∑–Ω—ã–π –º–æ–º–µ–Ω—Ç:** —Å–Ω–∏–∂–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º, –≤—ã—Å–æ–∫–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ ‚Üí –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–∏ –±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ.

---

### e) **Snapshot (SQL Server —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ)**

- **–°—É—Ç—å:** –∫–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤–∏–¥–∏—Ç **—Å–Ω–∏–º–æ–∫ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –º–æ–º–µ–Ω—Ç –µ—ë –Ω–∞—á–∞–ª–∞**.
- **–ü—Ä–æ–±–ª–µ–º—ã:** –Ω–µ—Ç dirty read, –Ω–µ—Ç non-repeatable read, –Ω–µ—Ç —Ñ–∞–Ω—Ç–æ–º–æ–≤.
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **versioning** (tempdb —Ö—Ä–∞–Ω–∏—Ç —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫).
  - –•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏ –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —á—Ç–µ–Ω–∏–π.

- **–ö–∞–≤–µ—Ä–∑–Ω—ã–π –º–æ–º–µ–Ω—Ç:** –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ tempdb –ø—Ä–∏ –±–æ–ª—å—à–æ–º —á–∏—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

---

## 4Ô∏è‚É£ **–í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è –∏–∑–æ–ª—è—Ü–∏–∏**

| –£—Ä–æ–≤–µ–Ω—å          | Dirty Read | Non-repeatable Read | Phantom Read | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å    |
| ---------------- | ---------- | ------------------- | ------------ | --------------------- |
| Read Uncommitted | ‚úÖ         | ‚úÖ                  | ‚úÖ           | –≤—ã—Å–æ–∫–∞—è               |
| Read Committed   | ‚ùå         | ‚úÖ                  | ‚úÖ           | —Å—Ä–µ–¥–Ω—è—è               |
| Repeatable Read  | ‚ùå         | ‚ùå                  | ‚úÖ           | –Ω–∏–∂–µ                  |
| Serializable     | ‚ùå         | ‚ùå                  | ‚ùå           | –Ω–∏–∑–∫–∞—è                |
| Snapshot         | ‚ùå         | ‚ùå                  | ‚ùå           | –∑–∞–≤–∏—Å–∏—Ç –æ—Ç versioning |

**–ö–∞–≤–µ—Ä–∑–Ω—ã–π –º–æ–º–µ–Ω—Ç:** ¬´–ø–æ–≤—ã—à–µ–Ω–∏–µ¬ª —É—Ä–æ–≤–Ω—è –∏–∑–æ–ª—è—Ü–∏–∏ ‚Üí –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–∞—Å—Ç—É—Ç, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞–¥–∞–µ—Ç, deadlock —Ä–∏—Å–∫ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è.

---

## 5Ô∏è‚É£ **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã –¥–ª—è .NET**

1. **–î–ª—è Web API / –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏**: —á–∞—Å—Ç–æ —Ö–≤–∞—Ç–∞–µ—Ç `Read Committed` –∏–ª–∏ `Snapshot` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —á—Ç–µ–Ω–∏—è.
2. **–î–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**: `Serializable` –∏–ª–∏ `Repeatable Read` ‚Üí –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å.
3. **–î–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π**: –∏–∑–±–µ–≥–∞—Ç—å Serializable ‚Üí —Ä–∏—Å–∫ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
4. **EF Core –ø—Ä–∏–º–µ—Ä—ã:**

```csharp
using var transaction = await context.Database.BeginTransactionAsync(System.Data.IsolationLevel.RepeatableRead);
```

5. **Deadlock prevention:** –∫–æ—Ä–æ—Ç–∫–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –µ–¥–∏–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞—Ö–≤–∞—Ç–∞ —Ä–µ—Å—É—Ä—Å–æ–≤.

---

**[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≥–ª–∞–≤–Ω–æ–π](../index.md)**

<p align="center">‚ú®Dvurechensky‚ú®</p>
